"""ERG Plugin Architecture - Restructured Version

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æœ€ç»ˆæ¶æ„ / Final Architecture
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

é¡¹ç›®å·²é‡æ„ä¸ºä¸‰ä¸ªæ¸…æ™°çš„éƒ¨åˆ†ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ 1 éƒ¨åˆ†ï¼šERG æ’ä»¶æ ¸å¿ƒæ¨¡å— (Plugin Core Modules)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  è¿™å››ä¸ªæ–‡ä»¶å®ç°äº†å®Œæ•´çš„ ERG ä¿¡å·å¤„ç†ç³»ç»Ÿ                                    â”‚
â”‚  These four files implement the complete ERG signal processing system       â”‚
â”‚                                                                              â”‚
â”‚  1ï¸âƒ£  erg_plugin_core.py
â”‚      æ ¸å¿ƒ ERG ä¿¡å·å¤„ç†å¼•æ“ / Core ERG signal processing engine
â”‚      â”œâ”€ ErgConfig: é…ç½®å‚æ•° dataclass
â”‚      â”œâ”€ ErgFilter: å•é€šé“ ERG æ»¤æ³¢å™¨å®ç°
â”‚      â”‚  â””â”€ å¤„ç†é“¾ï¼šæ¿€æ´» â†’ éçº¿æ€§ â†’ é«˜é€š â†’ æ•´æµ â†’ ä½é€š
â”‚      â””â”€ build_erg_processor(): å·¥å‚å‡½æ•°
â”‚
â”‚      å…³é”®æ–¹æ³• / Key methods:
â”‚      - __init__(): åˆå§‹åŒ–å‚æ•°
â”‚      - step(activation, force): å¤„ç†ä¸€æ­¥å¹¶è¿”å› ERG å€¼
â”‚      - reset(): é‡ç½®å†…éƒ¨çŠ¶æ€
â”‚      - get_state(): è·å–å½“å‰çŠ¶æ€
â”‚
â”‚      ä¾èµ– / Dependencies: numpy only
â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚
â”‚  2ï¸âƒ£  erg_plugin.py
â”‚      ERG æ’ä»¶ä¸»æ¥å£ / Main ERG plugin interface
â”‚      â”œâ”€ ErgPlugin: ä¸»æ’ä»¶ç±»
â”‚      â”œâ”€ ErgBatch: æ‰¹é‡å¤„ç†å™¨
â”‚      â”œâ”€ ErgActuatorGroup: æ‰§è¡Œå™¨åˆ†ç»„ç®¡ç†
â”‚      â””â”€ å…¶ä»–ç®¡ç†ç±»å’Œå·¥å…·å‡½æ•°
â”‚
â”‚      å…³é”®ç±» / Key classes:
â”‚      - ErgPlugin: å•ä¸€ ERG å¤„ç†å™¨
â”‚      - ErgBatch: å¤šä¸ªå¤„ç†å™¨çš„æ‰¹é‡ç®¡ç†
â”‚      - ErgActuatorGroup: æ‰§è¡Œå™¨åˆ†ç»„ï¼ˆç”¨äºäººå½¢æœºå™¨äººï¼‰
â”‚
â”‚      ä¾èµ– / Dependencies: erg_plugin_core, numpy, dataclass
â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚
â”‚  3ï¸âƒ£  erg_recorder.py
â”‚      æ•°æ®è®°å½•å’Œå¯¼å‡º / Data recording and export
â”‚      â”œâ”€ ErgRecorder: å•è‚Œè‚‰æ•°æ®å½•åˆ¶
â”‚      â”œâ”€ MultiMuscleRecorder: å¤šè‚Œè‚‰å¹¶å‘å½•åˆ¶
â”‚      â”œâ”€ æ•°æ®å¯¼å‡º (NPZ, CSV)
â”‚      â””â”€ ç»Ÿè®¡å’Œåˆ†æå·¥å…·
â”‚
â”‚      å…³é”®ç±» / Key classes:
â”‚      - ErgRecorder: è®°å½•å•ä¸ªè‚Œè‚‰çš„æ—¶é—´åºåˆ—æ•°æ®
â”‚      - MultiMuscleRecorder: ç®¡ç†å¤šä¸ª ErgRecorder å®ä¾‹
â”‚
â”‚      å¯¼å‡ºæ–¹æ³• / Export methods:
â”‚      - save_npz(): ä¿å­˜ä¸ºå‹ç¼©äºŒè¿›åˆ¶ (NumPy)
â”‚      - save_csv(): ä¿å­˜ä¸ºæ–‡æœ¬ CSV æ ¼å¼
â”‚      - save_all(): ä¿å­˜ NPZ + CSV
â”‚      - to_numpy(): è½¬æ¢ä¸º NumPy å­—å…¸
â”‚
â”‚      ä¾èµ– / Dependencies: numpy, pathlib, datetime
â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚
â”‚  4ï¸âƒ£  erg_visualization.py
â”‚      ç¦»çº¿ç»˜å›¾å’Œå¯è§†åŒ– / Offline plotting and visualization
â”‚      â”œâ”€ plot_erg_signal(): å•è‚Œè‚‰è¯¦ç»†åˆ†æ
â”‚      â”œâ”€ plot_multi_erg(): å¤šè‚Œè‚‰å¹¶æ’æ˜¾ç¤º
â”‚      â”œâ”€ plot_comparison(): ä¸¤ä¸ªä¿¡å·å¯¹æ¯”
â”‚      â””â”€ quick_plot(): å¿«é€Ÿå†…è”ç»˜å›¾
â”‚
â”‚      å…³é”®å‡½æ•° / Key functions:
â”‚      - plot_erg_signal(recorder, window=None, save_path=None)
â”‚      - plot_multi_erg(recorders, save_path=None)
â”‚      - plot_comparison(rec1, rec2, save_path=None)
â”‚      - quick_plot(recorder, show_activation, show_force)
â”‚
â”‚      ç‰¹æ€§ / Features:
â”‚      - æ”¯æŒç¦»çº¿æ¨¡å¼ï¼ˆéäº¤äº’ï¼‰
â”‚      - è‡ªåŠ¨ä¿å­˜ PNG æ–‡ä»¶ï¼ˆ150 DPIï¼‰
â”‚      - æ”¯æŒäº¤äº’å¼æŸ¥çœ‹
â”‚      - ä¸‰é¢æ¿å¸ƒå±€ (ERG, activation, force)
â”‚      - å¯é€‰ç¼©æ”¾çª—å£
â”‚
â”‚      ä¾èµ– / Dependencies: matplotlib, numpy, erg_recorder
â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚
â”‚  ä½¿ç”¨ç¤ºä¾‹ / Example usage:
â”‚
â”‚      from erg_plugin_core import ErgFilter
â”‚      from erg_recorder import ErgRecorder
â”‚      from erg_visualization import plot_erg_signal
â”‚
â”‚      # åˆ›å»ºæ»¤æ³¢å™¨å’Œå½•åˆ¶å™¨
â”‚      filter = ErgFilter()
â”‚      recorder = ErgRecorder("superficial_masseter_left")
â”‚
â”‚      # å¤„ç†æ•°æ®
â”‚      for step in range(15000):  # 30 seconds @ 500Hz
â”‚          activation = 0.5  # 0-1
â”‚          force = 1.0      # N
â”‚          erg = filter.step(activation, force)
â”‚          recorder.record_step(t=step*0.002, erg=erg, act=activation, force=force)
â”‚
â”‚      # å¯¼å‡ºæ•°æ®
â”‚      recorder.save_npz("erg_test")
â”‚      recorder.save_csv("erg_test")
â”‚
â”‚      # ç»˜å›¾
â”‚      plot_erg_signal(recorder, save_path="erg_test/plot.png")
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ 2 éƒ¨åˆ†ï¼šæ¼”ç¤ºæ¨¡å— (Demonstration Module)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  viewer_realtime_plot.py
â”‚  å®æ—¶ MuJoCo æ¼”ç¤º / Real-time MuJoCo demonstration
â”‚  
â”‚  åŠŸèƒ½ / Features:
â”‚  - é›†æˆ MuJoCo Viewer çª—å£
â”‚  - å®æ—¶æ˜¾ç¤º 3 æ¡ä¿¡å·ï¼ˆæ¿€æ´»ã€åŠ›ã€ERGï¼‰
â”‚  - ç”¨æˆ·å¯é€šè¿‡æ»‘å—æ‰‹åŠ¨æ§åˆ¶è‚Œè‚‰æ¿€æ´»
â”‚  - 10 ç§’çš„æ»‘åŠ¨çª—å£å®æ—¶ç»˜å›¾
â”‚  
â”‚  ä½¿ç”¨ / Usage:
â”‚      python viewer_realtime_plot.py
â”‚  
â”‚  ä¾èµ– / Dependencies: mujoco, matplotlib, threading, erg_plugin_core, erg_recorder
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ 3 éƒ¨åˆ†ï¼šæµ‹è¯•æ¨¡å— (Test Module)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  test.py
â”‚  å®Œæ•´çš„æµ‹è¯•æ¡†æ¶ / Complete testing framework
â”‚  
â”‚  åŠŸèƒ½ / Features:
â”‚  âœ“ äº¤äº’å¼è‚Œè‚‰é€‰æ‹©ï¼ˆå•/å¤šè‚Œè‚‰ï¼‰
â”‚  âœ“ è‡ªåŠ¨ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
â”‚  âœ“ è¾“å‡ºåˆ° erg_test/ æ–‡ä»¶å¤¹
â”‚  âœ“ è‡ªåŠ¨ç”Ÿæˆ NPZ + CSV + PNG
â”‚  âœ“ æ—¶é—´æˆ³æ–‡ä»¶å¤¹ç®¡ç†
â”‚  
â”‚  å·¥ä½œæµ / Workflow:
â”‚  1. è¿è¡Œï¼špython test.py
â”‚  2. é€‰æ‹©è‚Œè‚‰ï¼ˆæ”¯æŒå¤šç§è¾“å…¥æ ¼å¼ï¼‰
â”‚  3. è‡ªåŠ¨è¿è¡Œ 30 ç§’æ¨¡æ‹Ÿ
â”‚  4. è‡ªåŠ¨ä¿å­˜æ•°æ®å’Œç»˜åˆ¶å›¾è¡¨
â”‚  5. æŸ¥çœ‹ç»“æœï¼šerg_test/{muscle_name}_{timestamp}/
â”‚  
â”‚  è¾“å‡ºç»“æ„ / Output structure:
â”‚  
â”‚  erg_test/
â”‚  â””â”€â”€ superficial_20251207_165824/
â”‚      â”œâ”€â”€ superficial_masseter_right_erg.npz        (æ•°æ®å‹ç¼©æ–‡ä»¶)
â”‚      â”œâ”€â”€ superficial_masseter_right_erg.csv        (CSV æ–‡æœ¬æ•°æ®)
â”‚      â””â”€â”€ plots/
â”‚          â”œâ”€â”€ superficial_masseter_right_erg_signal.png    (ERG è¯¦ç»†åˆ†æ)
â”‚          â””â”€â”€ superficial_masseter_right_time_series.png   (æ—¶é—´åºåˆ—)
â”‚  
â”‚  ä½¿ç”¨ / Usage:
â”‚      python test.py
â”‚      # é€‰æ‹©è‚Œè‚‰ï¼š
â”‚      # 0 (å•ä¸ªç´¢å¼•)
â”‚      # 0,2,4 (å¤šä¸ªç´¢å¼•)
â”‚      # anterior_temporalis_left (è‚Œè‚‰åç§°)
â”‚  
â”‚  ä¾èµ– / Dependencies: mujoco, erg_plugin_core, erg_recorder, erg_visualization
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ–‡ä»¶æ¸…å• / File Manifest
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ exoforge_pligin/
â”œâ”€â”€ ğŸ“Œ æ ¸å¿ƒæ¨¡å— (Core Modules)
â”‚   â”œâ”€â”€ erg_plugin_core.py          (372 è¡Œ) - ERG ä¿¡å·å¤„ç†æ ¸å¿ƒ
â”‚   â”œâ”€â”€ erg_plugin.py               (??? è¡Œ) - ERG æ’ä»¶ä¸»æ¥å£
â”‚   â”œâ”€â”€ erg_recorder.py             (809 è¡Œ) - æ•°æ®å½•åˆ¶å’Œå¯¼å‡º
â”‚   â””â”€â”€ erg_visualization.py        (799 è¡Œ) - ç¦»çº¿ç»˜å›¾
â”‚
â”œâ”€â”€ ğŸ“Œ æ¼”ç¤ºæ¨¡å— (Demonstration)
â”‚   â””â”€â”€ viewer_realtime_plot.py     (414 è¡Œ) - å®æ—¶ MuJoCo æ¼”ç¤º
â”‚
â”œâ”€â”€ ğŸ“Œ æµ‹è¯•æ¨¡å— (Testing)
â”‚   â””â”€â”€ test.py                     (270+ è¡Œ) - å®Œæ•´æµ‹è¯•æ¡†æ¶
â”‚
â”œâ”€â”€ ğŸ“Œ æ–‡æ¡£ (Documentation)
â”‚   â”œâ”€â”€ README.md                   - é¡¹ç›®æ¦‚è§ˆ
â”‚   â”œâ”€â”€ QUICK_START.txt             - å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ TEST_GUIDE.md               - æµ‹è¯•è¯¦ç»†æŒ‡å—
â”‚   â”œâ”€â”€ TEST_SUMMARY.md             - æµ‹è¯•åŠŸèƒ½æ€»ç»“
â”‚   â””â”€â”€ FILES_MANIFEST.md           - æ–‡ä»¶æ¸…å•
â”‚
â”œâ”€â”€ ğŸ“Œ æ•°æ® (Data)
â”‚   â”œâ”€â”€ erg_test/                   - æµ‹è¯•è¾“å‡ºæ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ superficial_20251207_165824/
â”‚   â”‚   â”‚   â”œâ”€â”€ *.npz               - å‹ç¼©æ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ *.csv               - CSV æ–‡æœ¬æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ plots/              - PNG å›¾è¡¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ examples/                   (å·²åˆ é™¤)
â”‚
â”œâ”€â”€ ğŸ“Œ é…ç½® (Configuration)
â”‚   â””â”€â”€ __init__.py                 - Python åŒ…åˆå§‹åŒ–
â”‚
â””â”€â”€ ğŸ“Œ ç¼“å­˜ (Cache)
    â””â”€â”€ __pycache__/                - Python ç¼–è¯‘ç¼“å­˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¿«é€Ÿå¼€å§‹ / Quick Start
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  è¿è¡Œæµ‹è¯• (Run test):
    cd /home/yichen/exoforge-feature-sensors-user-intent/src/exoforge_pligin
    python test.py

2ï¸âƒ£  é€‰æ‹©è‚Œè‚‰ (Select muscles):
    è¾“å…¥ 0 æˆ–é€‰æ‹©å¤šä¸ª 0,1,2 æˆ–è¾“å…¥è‚Œè‚‰åç§°

3ï¸âƒ£  æŸ¥çœ‹ç»“æœ (View results):
    ls erg_test/
    # æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
    # - *.npz: å‹ç¼©æ•°æ®æ–‡ä»¶
    # - *.csv: CSV æ•°æ®æ–‡ä»¶
    # - plots/: PNG å›¾è¡¨æ–‡ä»¶å¤¹


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ•°æ®æµ / Data Flow
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç”¨æˆ·è¾“å…¥ (User Input)
    â†“
    â””â”€â†’ test.py: é€‰æ‹©è‚Œè‚‰ (Select muscles)
        â†“
        â””â”€â†’ SimulatedErGController: è¿è¡Œä»¿çœŸ (Run simulation)
            â”œâ”€â†’ ErgFilter: å¤„ç†æ¯ä¸€æ­¥ (Process each step)
            â””â”€â†’ MultiMuscleRecorder: è®°å½•æ•°æ® (Record data)
                â†“
                â””â”€â†’ save_all(): å¯¼å‡º NPZ + CSV (Export NPZ + CSV)
                    â”œâ”€â†’ *.npz æ–‡ä»¶
                    â””â”€â†’ *.csv æ–‡ä»¶
                        â†“
                        â””â”€â†’ generate_plots(): ç»˜å›¾ (Generate plots)
                            â”œâ”€â†’ plot_erg_signal(): ERG ä¿¡å·å›¾
                            â”œâ”€â†’ plot_multi_erg(): å¤šè‚Œè‚‰å¯¹æ¯”
                            â””â”€â†’ *.png æ–‡ä»¶


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ ¸å¿ƒç‰¹æ€§ / Key Features
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… æ¨¡å—åŒ–è®¾è®¡
   - æ ¸å¿ƒç®—æ³•ç‹¬ç«‹äºæ•°æ®è®°å½•å’Œå¯è§†åŒ–
   - æ¯ä¸ªæ¨¡å—å¯å•ç‹¬ä½¿ç”¨
   - Clear separation of concerns

âœ… å®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹
   - æ¿€æ´» â†’ ERG ä¿¡å·å¤„ç† â†’ æ•°æ®å½•åˆ¶ â†’ å¯¼å‡º â†’ ç»˜å›¾

âœ… å¤šç§æ•°æ®å¯¼å‡ºæ ¼å¼
   - NPZ: å‹ç¼©äºŒè¿›åˆ¶ï¼ˆé«˜æ•ˆï¼‰
   - CSV: æ–‡æœ¬æ ¼å¼ï¼ˆå¯è¯»æ€§å¼ºï¼‰

âœ… ä¸°å¯Œçš„å¯è§†åŒ–
   - å•è‚Œè‚‰è¯¦ç»†åˆ†æï¼ˆ3 é¢æ¿ï¼‰
   - å¤šè‚Œè‚‰å¹¶æ’å¯¹æ¯”
   - ç»Ÿè®¡ä¿¡æ¯å±•ç¤º

âœ… çµæ´»çš„è¾“å…¥
   - æ”¯æŒå•/å¤šè‚Œè‚‰é€‰æ‹©
   - å¤šç§é€‰æ‹©è¯­æ³•ï¼ˆç´¢å¼•ã€é€—å·åˆ†éš”ã€åç§°ï¼‰

âœ… è‡ªåŠ¨æ–‡ä»¶ç®¡ç†
   - æ—¶é—´æˆ³æ–‡ä»¶å¤¹
   - è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„
   - æ¸…æ™°çš„è¾“å‡ºç»„ç»‡


"""
